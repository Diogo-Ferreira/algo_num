<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Labo 4</title>
  </head>
  <body>
    <canvas width="600px" height="480px" id="myCanvas"></canvas>
    <script src="graph.js"></script>
    <script>
    function central_derivative(f,x,h){
      return (f(x + h) - f(x-h))/(2*h);
    }

    function get_taylor_n_term(x,n){
      return parseFloat(Math.pow(-1,n) * Math.pow(x,2*n))/parseFloat(fact(2*n));
    }
    function fact(num){
        var rval=1;
        for (var i = 2; i <= num; i++)
            rval = rval * i;
        return rval;
    }
    function getRandomColor() {
        var letters = '0123456789ABCDEF'.split('');
        var color = '#';
        for (var i = 0; i < 6; i++ ) {
            color += letters[Math.floor(Math.random() * 16)];
        }
        return color;
    }

    var myGraph = new Graph({
      canvasId: 'myCanvas',
      minX: -10,
      minY: -10,
      maxX: 10,
      maxY: 10,
      unitsPerTick: 1
    });
    var f = function(x,n=10){
      var sum = 0;
      for(var i = 0; i < n; i++){
        sum += get_taylor_n_term(x,i);
      }
      return sum;
    }

    for(var i = 0; i < 20 ; i ++){
      setTimeout(function(i_local){
        myGraph.drawEquation(function(x) {
          return f(x,i_local+1);
        }, getRandomColor(), 3);
      },i*500,i);
    }



    </script>
  </body>
</html>
