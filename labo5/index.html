<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Labo 5 - Equipe 1</title>
</head>
<body>
    <script>
        var REAL_PI = 3.14159265358979323;
                      /*3.1415926535897944
                      3.1429259869231245
                      3.1415926535897913*/
        var f = function(x){
            return 4 / (1 + x*x);
        }
        function simpson(f,a,b,n){
            var sum = 0.0;
            var h = parseFloat((b-a) / n);
            for(var i = 1 ; i < n ; i++){

                //Somme i pair
                if( i % 2 == 0){
                    sum += 2 * f(a + i * h);
                }
                //Somme i impair
                else{
                    sum += 4 * f(a + i * h);
                }
            }
            return (h/3) * (f(a) + sum + f(b));
        }

        /*var start = performance.now();
        var pi = simpson(f,0.0,1.0,198);
        var end = performance.now();
        console.log("TIME : " + parseFloat(end-start) + " for " + pi.toFixed(20))*/

        //N = 194
        var pi = 0;
        var n = 0;
        do{
            pi = simpson(f,0.0,1.0,n);
            console.log(pi.toFixed(20) + " with diff : " + Math.abs(REAL_PI - pi) + " N : " + n);
            n++;
        }while( Math.abs(REAL_PI-pi) > 0.0);
    </script>
</body>
</html>